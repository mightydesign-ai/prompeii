<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>Prompeii Admin — Prompt List</title>

  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml" href="/favicon.svg" />

  <!-- Admin Styles -->
  <link rel="stylesheet" href="./admin.css" />
  <link rel="stylesheet" href="/css/tailwind.css" />


  <style>
    .sort-indicator {
      opacity: 0.4;
    }

    th.sort-asc .sort-indicator::after {
      content: "▲";
      margin-left: 4px;
    }

    th.sort-desc .sort-indicator::after {
      content: "▼";
      margin-left: 4px;
    }
  </style>
</head>

<body class="admin-body">

  <!-- HEADER BAR -->
  <header class="admin-header">
    <div>
      <h1>Prompeii Admin Console</h1>
      <p class="admin-subtitle">
        Manage curated prompts, update metadata, and maintain the library.
      </p>
    </div>

    <div class="admin-actions">
      <span id="rowCount" class="muted-count">—</span>
      <a href="admin-create.html" class="btn-primary">+ New Prompt</a>
    </div>
  </header>

  <!-- FILTER BAR -->
  <section class="filter-bar">
    <input
      id="searchInput"
      type="text"
      class="input-text"
      placeholder="Search by Smart Title, category, or tags…"
    />

    <select id="statusFilter" class="input-select">
      <option value="all">All Statuses</option>
      <option value="draft">Draft</option>
      <option value="curated">Curated</option>
      <option value="archived">Archived</option>
    </select>
  </section>

  <!-- TABLE LIST -->
  <section class="table-wrapper">
    <table class="admin-table" id="promptTable">
      <thead>
        <tr>
          <th data-sort="smart_title">
            Smart Title <span class="sort-indicator"></span>
          </th>
          <th data-sort="category">
            Category <span class="sort-indicator"></span>
          </th>
          <th data-sort="status">
            Status <span class="sort-indicator"></span>
          </th>
          <th data-sort="updated_at">
            Updated <span class="sort-indicator"></span>
          </th>
          <th style="width:110px;">Actions</th>
        </tr>
      </thead>

      <tbody id="tableBody">
        <!-- Rows injected by admin.js -->
      </tbody>
    </table>

    <div id="emptyState" class="empty-state" style="display: none;">
      <p>No prompts found. Adjust your filters or create a new one.</p>
    </div>
  </section>

  <!-- TOAST -->
  <div id="toast" class="toast"></div>

  <!-- GLOBAL LOADING OVERLAY -->
  <div id="loadingOverlay" class="loading-overlay">
    <div class="loading-spinner"></div>
  </div>

  <!-- ======================================================
       GLOBAL SCRIPTS (LOAD IN ORDER)
  ====================================================== -->

  <!-- 1 — Supabase UMD -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.39.3/dist/umd/supabase.js"></script>

  <!-- 2 — Global Supabase client -->
  <script src="/global-supabase.js"></script>

  <!-- 3 — Global Loading Overlay -->
  <script src="/loading-overlay.js"></script>

  <!-- 4 — Global Toast -->
  <script>
    window.toast = function (msg) {
      const t = document.getElementById("toast");
      if (!t) return;
      t.textContent = msg;
      t.classList.add("toast-visible");
      setTimeout(() => t.classList.remove("toast-visible"), 2000);
    };
  </script>

  <!-- 5 — Page logic LAST -->
  <script type="module" src="./admin.js"></script>

</body>
</html>
